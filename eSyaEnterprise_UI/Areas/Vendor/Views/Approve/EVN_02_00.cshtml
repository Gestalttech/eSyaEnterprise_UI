@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = "EVN_02_00";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/css/Masters/VendorMaster.css" rel="stylesheet" />
<link href="~/css/Common/jquery.contextMenu.min.css" rel="stylesheet" />
@{
    var userFormRole = (eSyaEnterprise_UI.Models.DO_UserFormRole)ViewBag.UserFormRole;
}
@section scripts {
    <script src="~/js/VendorApproval/ApprovalListInVendorRegister.js"></script>
    <script src="~/js/VendorApproval/VendorRegister.js"></script>
    <script src="~/js/VendorApproval/VendorLocation.js"></script>
    <script src="~/js/VendorApproval/VendorBusinessLink.js"></script>
    <script src="~/js/VendorApproval/VendorStatutorydetails.js"></script>
    <script src="~/js/VendorApproval/VendorBank.js"></script>
    <script src="~/js/VendorApproval/VendorSupplyGroup.js"></script>
    <script src="~/js/Common/bootbox.min.js"></script>
    <script src="~/js/Common/jquery.contextMenu.min.js"></script>

}
<style>
    div[role=tablist] {
        width: 100%;
        padding: 0px 0px 15px;
    }

    #approveVendor-pills-tab .nav-item .nav-link {
        font-size: 12px;
        padding: 8px 12px;
        font-family: 'helvetica-bold';
        color: #4a4a4a;
        /* border: 1px dashed #cccccc; */
        width: 100%;
        border-radius: 0px !important;
        background: #fff;
        border-bottom: 1px solid #f1f1f1;
        text-align: left;
    }

        #approveVendor-pills-tab .nav-item .nav-link.active, #approveVendor-pills-tab .nav-item .show > .nav-link {
            color: #000000;
            background-color: #fff9d6;
            font-family: 'helvetica-bold';
            border-right: 3px solid #797172;
        }

    #approveVendor-pills-tab li.nav-item {
        border-bottom: 1px solid #ffffff;
    }

    #approveVendor-pills-tab li button {
        font-size: 12px;
        border-color: transparent;
    }
</style>
<script>
     var _userFormRole = JSON.parse('@Html.Raw(Json.Serialize(userFormRole))');

     var localization = {
        VendorId: '@Localizer["VendorId"]',
        VendorName: '@Localizer["VendorName"]',
        CreditType: '@Localizer["CreditType"]',
        CreditPeriodindays: '@Localizer["CreditPeriod(Indays)"]',
        VendorStatus: '@Localizer["VendorStatus"]',
        IsBlackListed: '@Localizer["IsBlackListed"]',
        ScoreCard: '@Localizer["ScoreCard"]',
        VendorLocation: '@Localizer["VendorLocation"]',
        VendorAddress: '@Localizer["VendorAddress"]',
        ContactPerson: '@Localizer["ContactPerson"]',
        RegisteredMobileNumber: '@Localizer["RegisteredMobileNumber"]',
        AlternateMobileNumber: '@Localizer["AlternateMobileNumber"]',
        EmailID: '@Localizer["EmailID"]',
        DefaultLocation: '@Localizer["DefaultLocation"]',
        SegmentDescription: '@Localizer["SegmentDescription"]',
        BusinessLocation: '@Localizer["BusinessLocation"]',
        Select: '@Localizer["Select"]',
        LocationID: '@Localizer["LocationID"]',
        Default: '@Localizer["Default"]',
        StatutoryDescription: '@Localizer["StatutoryDescription"]',
        BeneficiaryName: '@Localizer["BeneficiaryName"]',
        BankName: '@Localizer["BankName"]',
        BankAcNo: '@Localizer["BankA/cNo"]',
        SwiftCode: '@Localizer["SwiftCode"]',
        IFSCCode: '@Localizer["IFSCCode"]',
        Active: '@Localizer["Active"]',
        Actions: '@Localizer["Actions"]',
        Edit: '@Localizer["Edit"]',
        View: '@Localizer["View"]',
        DeActivate: '@Localizer["DeActivate"]',
        Activate: '@Localizer["Activate"]',
        Update: '@Localizer["Update"]',
        Save: '@Localizer["Save"]',
        Authorize: '@Localizer["Authorize"]',
        AddVendorDetails: '@Localizer["AddVendorDetails"]',
        EditVendorDetails: '@Localizer["EditVendorDetails"]',
        ViewVendorDetails: '@Localizer["ViewVendorDetails"]',
        IsDefaultLocation: '@Localizer["IsDefaultLocation"]',
        WhatsAppNumber: '@Localizer["WhatsAppNumber"]',
        MobileNumber: '@Localizer["MobileNumber"]',
        Delete: '@Localizer["Delete"]',
        VendorLocation: '@Localizer["VendorLocation"]',
        VendorBusinessLink: '@Localizer["VendorBusinessLink"]',
        VendorRegister: '@Localizer["VendorRegister"]',
        VendorPartNumber: '@Localizer["VendorPartNumber"]',
        VendorSupplyGroup: '@Localizer["VendorSupplyGroup"]',
        VendorStatutoryDetails: '@Localizer["VendorStatutoryDetails"]',
        VendorApprovalList: '@Localizer["VendorApprovalList"]',
        VendorBank: '@Localizer["VendorBank"]',
        VendorBlackList: '@Localizer["VendorBlackList"]',
        VendorItemLink: '@Localizer["VendorItemLink"]',
        VendorCode: '@Localizer["VendorCode"]',
        ItemDescription: '@Localizer["ItemDescription"]',
        BusinessShareInPercentage: '@Localizer["BusinessShareInPercentage"]',
        MinimumSupplyQuantity: '@Localizer["MinimumSupplyQuantity"]',
        RatePlan: '@Localizer["RatePlan"]',
        EffectiveFrom: '@Localizer["EffectiveFrom"]',
        EffectiveTill: '@Localizer["EffectiveTill"]',
        ActiveStatus: '@Localizer["ActiveStatus"]',
        ParameterDescription: '@Localizer["ParameterDescription"]',
        Approve: '@Localizer["Approve"]',

     }
    var errorMsg = {
        addauth_E1: '@Localizer["UIC01"]',
        editauth_E2: '@Localizer["UIC02"]',
        vieweauth_E3: '@Localizer["UIC03"]',
        deleteauth_E4: '@Localizer["UIC04"]',
        CreateVendordetails_E5: '@Localizer["UI0217"]',
        BeneficiaryName_E6: '@Localizer["UI0218"]',
        BankName_E7: '@Localizer["UI0219"]',
        AccountName_E8: '@Localizer["UI0220"]',
        SwiftCode_E9: '@Localizer["UI0221"]',
        IFSCCode_E10: '@Localizer["UI0222"]',
        VendorLocation_E11: '@Localizer["UI0223"]',
        EmailID_E12: '@Localizer["UI0139"]',
        ValidEmailID_E13: '@Localizer["UI0140"]',
        Statutorydetails_E14: '@Localizer["UI0224"]',
        VendorName_E15: '@Localizer["UI0225"]',
        CreditDays_E16: '@Localizer["UI0226"]',
        CreditPeriod_E17: '@Localizer["UI0227"]',
        ContactPerson_E18: '@Localizer["UI0228"]',
        ISD_E19: '@Localizer["UI0137"]',
        MobileNo_E20: '@Localizer["UI0138"]',
        Address_E21: '@Localizer["UI0229"]',
        ItemDesc_E22: '@Localizer["UI0236"]',
        Partnumber_E23: '@Localizer["UI0237"]',
        PartDesc_E24: '@Localizer["UI0238"]',
        CheckOneApproval_E5: '@Localizer["UI0402"]',
    }
</script>
<section id="divAPGrid">
    
    <div class="row form-group">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <label>@Localizer["SelectVendorType"]</label>
            <div class="form-group">
                <input type="radio" name="rdvendor" id="rdUnauthvendor" value="UnApproved" checked="checked" /><label for="rdUnauthvendor" class="d-inline ps-1 pe-3"> @Localizer["Un-Approved"]</label>
                <input type="radio" name="rdvendor" id="rdAuthenvendor" value="Approved" /><label for="rdAuthenvendor" class="d-inline ps-1 pe-3">@Localizer["Approved"]</label>
                <input type="radio" name="rdvendor" id="rdRejectedvendor" value="Rejected" /><label for="rdRejectedvendor" class="d-inline ps-1">@Localizer["Rejected"] </label>
            </div>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
            <table id="jqgAPVendorRegister"></table>
            <div id="jqpAPVendorRegister"></div>
        </div>
    </div>

</section>

<section id="divAPForm" style="display:none">
    <div class="row">
        <div class="col-lg-12 col-md-12">
            <h6 class="displayNames" id="hdAPVendorName"><span class="d-inline m-0 fw-bold" id="lblAPDisplayNames">@Localizer["VendorDetails"]</span>   <span class='lblClosebtn' onclick="fnCloseVendorDetails()"><i class="fa fa-times"></i></span></h6>
        </div>
        <div class="col-sm-12">
            <input type="text" class="form-control" id="txtAPVendorCode" style="display:none">
        </div>
        <div class="col-lg-4 col-md-4 col-sm-3 col-xs-3 col-xl-2  animated slideInLeft sidebarSmall">
            <ul class="nav flex-column nav-tabs shadowLite" id="approveVendor-pills-tab" role="tablist" aria-orientation="vertical">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active position-relative" id="vendorDetailsAP-tab" data-bs-toggle="pill" data-bs-target="#vendorDetailsAP" type="button" role="tab" aria-controls="pills-vendorDetails" aria-selected="true">@Localizer["VendorDetails"]</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link position-relative" id="vendorLocationsAP-tab" data-bs-toggle="pill" data-bs-target="#vendorLocationsAP" type="button" role="tab" aria-controls="pills-vendorLocations" aria-selected="true" onclick="fnloadAPvendorLocationGrid()">@Localizer["VendorLocations"]</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link position-relative" id="vendorBusinessLinkAP-tab" data-bs-toggle="pill" data-bs-target="#vendorBusinessLinkAP" type="button" role="tab" aria-controls="pills-vendorBusinessLink" aria-selected="true" onclick="fnLoadAPBusinessLinkGrid()">@Localizer["VendorBusinessLink"]</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link position-relative" id="statutorydetailsAP-tab" data-bs-toggle="pill" data-bs-target="#statutorydetailsAP" type="button" role="tab" aria-controls="pills-statutorydetails" aria-selected="true" onclick="LoadAPVendorStatutorydetails()">@Localizer["StatutoryDetails"]</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link position-relative" id="bankdetailsAP-tab" data-bs-toggle="pill" data-bs-target="#bankdetailsAP" type="button" role="tab" aria-controls="pills-bankdetails" aria-selected="true" onclick="fnLoadAPBankDetails()">@Localizer["BankDetails"]</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link position-relative" id="supplygroupAP-tab" data-bs-toggle="pill" data-bs-target="#supplygroupAP" type="button" role="tab" aria-controls="pills-supplygroup" aria-selected="true" onclick="fnLoadAPSupplyGroupGrid()">@Localizer["SupplyGroup"]</button>
                </li>
            </ul>
            
        </div>
        <div class="col-lg-8 col-md-8 col-sm-9 col-xl-10 bg-white animated fadeIn delay-1s padleft0 mainbarSmall">
            <div class="tab-content shadowLite px-4 pb-4" id="approveVendor-pills-tabContent">
                <div class="tab-pane fade show active" id="vendorDetailsAP" role="tabpanel" aria-labelledby="vendorDetails-tab">
                    @await Html.PartialAsync("../Approve/_VendorDetails")
                    
                </div>
                <div class="tab-pane fade" id="vendorLocationsAP" role="tabpanel" aria-labelledby="vendorLocationsAP-tab">
                    @await Html.PartialAsync("../Approve/_VendorLocations")
                  
                </div>
                <div class="tab-pane fade" id="vendorBusinessLinkAP" role="tabpanel" aria-labelledby="vendorBusinessLinkAP-tab">
                    @await Html.PartialAsync("../Approve/_VendorBusinessLink")
                </div>
                <div class="tab-pane fade" id="statutorydetailsAP" role="tabpanel" aria-labelledby="statutorydetailsAP-tab">
                    @await Html.PartialAsync("../Approve/_StatutoryDetails")
                </div>
                <div class="tab-pane fade" id="bankdetailsAP" role="tabpanel" aria-labelledby="bankdetailsAP-tab">
                    @await Html.PartialAsync("../Approve/_BankDetails")
                </div>
                <div class="tab-pane fade" id="supplygroupAP" role="tabpanel" aria-labelledby="supplygroupAP-tab">
                    @await Html.PartialAsync("../Approve/_SupplyGroup")
                </div>
            </div>
        </div>

    </div>
</section>
  
<div class="modal fullscreen fade in" id="popupAPVendorRegister" tabindex="-1" role="dialog" aria-hidden="true" style="z-index: 9997;" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="modalid"></div>
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" onclick="fnClearAPVendorReg()"> <i class="fa fa-times"></i></button>
                <h4 class="modal-title">@Localizer["RegisterVendor"] </h4>
            </div>

            <!-- Hidden fields -->
            <!-- for Vendor Code-->
            <input type="hidden" id="txtAPVendorCode" />
            <!-- for Vendor Location-->
            <input type="hidden" id="txtAPlocationId" />
            <!-- for Vendor Statutory Details-->
            <input type="hidden" id="txtAPstatutorylocationId" />
            <input type="hidden" id="txtAPstatutorycode" />
            <input type="hidden" id="txtAPstatutoryvendorcode" />
            <!-- Hidden fields -->

            <div class="modal-body">

                <div id="accordion" class="accordion">
                    <div class="card mb-0">
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect  cancel-button" data-dismiss="modal" onclick="fnClearVendorReg();" id="btnAPclosepopup">@Localizer["Close"] </button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="PopupRejectVendor" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-md" role="document" style="box-shadow:none;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-bs-dismiss="modal"> <i class="fa fa-times"></i></button>
                <h4 class="modal-title">@Localizer["RejectUser"]</h4>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div class='col-lg-12 col-md-12 col-sm-12 form-group'>
                        <label class="">@Localizer["RejectionReason"]</label>
                        <textarea rows="4" cols="50" id="txtVendorRejectionReason" class="form-control" autocomplete="off"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-lg-12">
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent primary-button" id="btnRejectUserAuthenticate" onclick="fnRejectVendor();">
                            <i class="fa fa-times"></i> @Localizer["Reject"]
                        </button>
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect  cancel-button cancel-button" data-bs-dismiss="modal" id="btnCancelRejectUserAuthenticate"><i class="fa fa-times"></i> @Localizer["Cancel"] </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
  
<script>
   
    $("#btnAPVendorMaster").on('click', function () {
        $('select,input').attr('disabled',true);
         
    })
</script>